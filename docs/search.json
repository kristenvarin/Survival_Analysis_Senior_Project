[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Survival Analysis Senior Project",
    "section": "",
    "text": "1 Survival Analysis"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "This is a book created from markdown and executable code.\nSee Knuth (1984) for additional discussion of literate programming.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\nKnuth, Donald E. 1984. “Literate Programming.” Comput. J. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "3  References",
    "section": "",
    "text": "test"
  },
  {
    "objectID": "Kaplan_Meier.html#kaplan-meier-curve",
    "href": "Kaplan_Meier.html#kaplan-meier-curve",
    "title": "2  Kaplan Meier",
    "section": "2.2 Kaplan Meier Curve",
    "text": "2.2 Kaplan Meier Curve\nThe Kaplan Meier curve is a graphical representation of survival analysis. Similar to the survival probabilities discussed previously, the Kaplan Meier curve shows the relationships between time, which is typically plotted on the x-axis, and probability of survival, which is typically on the y-axis. The curve always ranges from 0 to 1 and is right skewed."
  },
  {
    "objectID": "Kaplan_Meier.html#kaplan-meier-in-r",
    "href": "Kaplan_Meier.html#kaplan-meier-in-r",
    "title": "2  Kaplan Meier",
    "section": "2.3 Kaplan Meier in R",
    "text": "2.3 Kaplan Meier in R\nLuckily, modern software makes these calculations easy and fast, as well as plotting them with confidence intervals and risk tables. The survival package in R has a function called Surv() that takes input data and creates a response object recording survival time for each observation. The survfit() function can be used to calculate the Kaplan Meier survival estimate for each time that a new event occurs. This object can then be used for the response in the regression functionSurvfit2() in the ggsurvfit package, which plots the Kaplan Meier curve for the data. The function takes into account right censoring as well, marking censored times with a \\(+\\) symbol in the object created and then editing the regression accordingly (Zabor, E). A new data set with censored times will be created to demonstrate this process. To do this, a 0 will be recorded for some individuals at times before t = 10.\n\n# Load Packages\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(knitr)\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(ggsurvfit)\nlibrary(gt)\n\n\n# Create data set\nid &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ntime &lt;- c(1, 2, 10, 4, 5, 6, 10, 8, 9, 10)\nstatus &lt;- c(1, 1, 0, 0, 1, 0, 0, 1, 1, 0)\ncensor &lt;- data.frame(id, time, status)\n\n\n# View the Data Set with censored times\n#| label: tbl-censor\n#| tbl-cap: \"Example Data Set with Censored Times\"\n\ncensor %&gt;% gt(caption = \"Example Data Set with Censored Times\") %&gt;%\n  cols_label(id = \"ID\", time = \"Time\", status = \"Status\") %&gt;%\n  tab_source_note(source_note = \"Table 3\") \n\n\n\n\n\n  Example Data Set with Censored Times\n  \n    \n    \n      ID\n      Time\n      Status\n    \n  \n  \n    1\n1\n1\n    2\n2\n1\n    3\n10\n0\n    4\n4\n0\n    5\n5\n1\n    6\n6\n0\n    7\n10\n0\n    8\n8\n1\n    9\n9\n1\n    10\n10\n0\n  \n  \n    \n      Table 3\n    \n  \n  \n\n\n\n\nsee ?tbl-censor\n\n# Surv() Function shows the time of event or censored time for each observation\ntimes2 &lt;- Surv(censor$time, censor$status)\ntimes2\n\n [1]  1   2  10+  4+  5   6+ 10+  8   9  10+\n\n\n\n# Calculate survival object\ns2 &lt;- survfit(times2 ~ 1, data = censor)\n# See the structure of this object\nstr(s2)\n\nList of 16\n $ n        : int 10\n $ time     : num [1:8] 1 2 4 5 6 8 9 10\n $ n.risk   : num [1:8] 10 9 8 7 6 5 4 3\n $ n.event  : num [1:8] 1 1 0 1 0 1 1 0\n $ n.censor : num [1:8] 0 0 1 0 1 0 0 3\n $ surv     : num [1:8] 0.9 0.8 0.8 0.686 0.686 ...\n $ std.err  : num [1:8] 0.105 0.158 0.158 0.221 0.221 ...\n $ cumhaz   : num [1:8] 0.1 0.211 0.211 0.354 0.354 ...\n $ std.chaz : num [1:8] 0.1 0.149 0.149 0.207 0.207 ...\n $ type     : chr \"right\"\n $ logse    : logi TRUE\n $ conf.int : num 0.95\n $ conf.type: chr \"log\"\n $ lower    : num [1:8] 0.732 0.587 0.587 0.445 0.445 ...\n $ upper    : num [1:8] 1 1 1 1 1 ...\n $ call     : language survfit(formula = times2 ~ 1, data = censor)\n - attr(*, \"class\")= chr \"survfit\"\n\n\n\n# View the survival estimate for each time an event occurs\ns2$time\n\n[1]  1  2  4  5  6  8  9 10\n\nround(s2$surv, 2)\n\n[1] 0.90 0.80 0.80 0.69 0.69 0.55 0.41 0.41\n\n\n\n# Plot the survival curve\n#| label: fig-survcurv\n#| tbl-cap: \"Kaplan Meier Survival Curve\"\n\nsurvfit2(Surv(time, status) ~ 1, data = censor) %&gt;% \n  ggsurvfit() +\n  labs(\n    x = \"Time\",\n    y = \"Overall survival probability\",\n    title = \"Kaplan Meier Survival Curve\"\n  ) + \n  scale_x_continuous(breaks=seq(0,10,by=2)) + \n  scale_y_continuous(breaks=seq(0,1,by=.2)) +\n  add_risktable()\n\n\n\n\nsee ?fig-survcurv"
  },
  {
    "objectID": "index.html#survival-analysis-background",
    "href": "index.html#survival-analysis-background",
    "title": "Survival Analysis Senior Project",
    "section": "1.1 Survival Analysis Background",
    "text": "1.1 Survival Analysis Background\nSurvival analysis is a type of statistical analysis used for analyzing the relationship between time and an event of interest occurring for individuals. The name survival analysis implies that the most common outcome analyzed is death, but many other events can be analyzed including: time it takes to begin recovering from treatment or time until a disease is contracted. These analyses are specifically helpful when comparing groups of people such as treatment groups in a clinical trial. Survival analysis can reveal whether certain treatments are more effective than others in helping individuals to live longer or avoid certain outcomes of interest, such as heart attacks."
  },
  {
    "objectID": "index.html#example-dataset-in-r",
    "href": "index.html#example-dataset-in-r",
    "title": "Survival Analysis Senior Project",
    "section": "1.2 Example dataset in R",
    "text": "1.2 Example dataset in R\nTo demonstrate survival analysis, an example dataset was created including ten observations and a time variable ranging from one to ten. Each observation was either assigned a 1, which represented the event occurrence, or a 0, representing no event occurrence. For those assigned a 1, a survival time was assigned in the range of 1 to 9. For those assigned a 0, a time of 10 was assigned, representing the end of the hypothetical study. To create a survival curve, the following steps need to be taken: finding the probability of survival at each time from 0 to 10 and plotting each point must be plotted on a graph. For the first point, probability of survival is always a 1 because every participant begins the study alive. For the first point in the dataset, the observation was assigned a 1 at time 1. When an individual experiences the outcome of interest, the total probability of survival for the group decreases, which is why survival curves have a rightly skewed distribution. The probability of surviving to time 1 would be the number of participants that did not experience the outcome divided by the total number of participants in the study, which would be nine participants divided by 10 subjects, or 0.9. After calculating the probability for each point in a similar way, the survival curve can be graphed (Figure 1). Summary statistics can also be calculated for these values.\nTable walking through the example probabilities here"
  },
  {
    "objectID": "index.html#censoring-background",
    "href": "index.html#censoring-background",
    "title": "Survival Analysis Senior Project",
    "section": "1.3 Censoring Background",
    "text": "1.3 Censoring Background\nOne issue with survival analysis data is the problem of an individual being lost-to-follow-up, meaning data could not be collected for them at some point during the study. This causes the outcome of interest to not be recorded for that individual, so the survival time for that individual can not be analyzed as it would not be accurate. When this happens, the survival times for those individuals are recorded as censored, causing standard analysis techniques to be inappropriate for these data. There are three types of censoring that can occur. The first type of censoring is called right censoring, which happens if an individual begins the study but then is lost-to-follow-up at some point during the study before it ends. The censored survival time for these individuals is thus equal to the total time they were known to be alive in the study’s observation period before they were lost-to-follow-up. Some common examples of when right censoring is needed include: an individual moving away from the study and not being able to participate or when an individual dies due to a non-related event after the study begins. Another type of censoring is called left censoring. In this type, the individual experiences lost-to-follow-up before the observation period begins. This would happen, for example, in a study that tracks patient recovery from a surgery, but with an observation period beginning one a month after the surgery took place. If a patient died less than a month after surgery, their survival time would need to be left censored. The final type of censoring is called interval censoring, which happens when a patient comes in and out of the study, making it possible for them to experience the outcome of interest during a period of time when they aren’t being observed. This often happens when recurrence is being tracked in a study. One example could be if recurrence of cancer is being tracked and the study checks in with patients every month. If an individual does not have cancer after the first month but then does after the second month, the recurrence time is somewhere between one and two months, and it therefore needs to be interval censored (Collet (2003)). Out of the three types, right censoring is the most common and will be demonstrated in the example data-set."
  },
  {
    "objectID": "Kaplan_Meier.html#kaplan-meier-survival-estimate",
    "href": "Kaplan_Meier.html#kaplan-meier-survival-estimate",
    "title": "2  Kaplan Meier",
    "section": "2.1 Kaplan Meier Survival Estimate",
    "text": "2.1 Kaplan Meier Survival Estimate\nThe Kaplan Meier survival estimate is how survival probabilities can be calculated while factoring in censored times. The Kaplan Meier survival estimate is used to calculate probability of survival at a given time where \\(S(t_j)\\) is the probability of being alive at time \\(t_j\\), \\(S(t_{j-1})\\) is the probability of being alive at \\(t_{j-1}\\), \\(n_j\\) is the number of patients alive just before \\(t_j\\), \\(d_j\\) is the number of events at \\(t_j\\), and \\(j\\) is the time interval of interest. The equation is \\(S(t_j)=S(t\\_{j-1})(1-\\frac{d_j}{n_j})\\) (Clark et al.). The equation essentially divides the surviving individuals by the individuals at risk, similar to the previous calculations shown. However, Kaplan Meier curves adjust for right-censored times by dropping observations from the total number of individuals at risk, \\(n_j\\), after their censored time has been reached. This adjustment prevents overestimating the survival probability because it no longer assumes censored individuals are still alive or and at risk (Goel et al)."
  },
  {
    "objectID": "Kaplan_Meier.html#log-rank-test",
    "href": "Kaplan_Meier.html#log-rank-test",
    "title": "2  Kaplan Meier",
    "section": "2.4 Log-Rank Test",
    "text": "2.4 Log-Rank Test\nOne of the most common applications of survival analysis and Kaplan Meier curves is for comparing survival statistics between two groups. One example of this might be if a study is comparing survival after two different treatment plans. The Log-Rank Test is a statistical test that tests the null hypothesis that there is no difference between the survival estimates of two groups at any point in time (Rich et al.). The only adjustment needed in R to factor in groups is to use the grouping variable as a predictor in the model (Zabor, E).\n\n# Create a data set to compare to surv2\nid &lt;- c(1:20)\ntime &lt;- c(8, 7, 10, 8, 5, 10, 10, 8, 9, 10, 1, 2, 1, 4, 5, 3, 4, 10, 8, 1)\nstatus &lt;- c(0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1)\ngroup &lt;- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2 ,2 ,2, 2, 2)\nsurv3 &lt;- data.frame(id, time, status)\n\nThe survdiff function works similarly to the survfit function, but compares groups. The two curves are statistically different at the five percent level.\n\nsurvdiff(Surv(time, status) ~ group, data = surv3)\n\nCall:\nsurvdiff(formula = Surv(time, status) ~ group, data = surv3)\n\n         N Observed Expected (O-E)^2/E (O-E)^2/V\ngroup=1 10        4     6.91      1.23      4.81\ngroup=2 10        6     3.09      2.75      4.81\n\n Chisq= 4.8  on 1 degrees of freedom, p= 0.03 \n\n\n\n# Plot the two curves\n\n#| label: fig-survcurv2\n#| tbl-cap: \"Kaplan Meier Survival Curve by Group\"\nsurvfit2(Surv(time, status) ~ group, data = surv3) %&gt;% \n  ggsurvfit() +\n  labs(\n    x = \"Days\",\n    y = \"Overall survival probability\",\n    title = \"Kaplan Meier Survival Curve by Group\"\n  ) + \n  scale_x_continuous(breaks=seq(0,10,by=2)) + \n  scale_y_continuous(breaks=seq(0,1,by=.2)) +\n  add_risktable()\n\n\n\n# find quarto caption option; references and titles\n\nsee ?fig-survcurv2"
  },
  {
    "objectID": "index.html#example-data-set-in-r",
    "href": "index.html#example-data-set-in-r",
    "title": "Survival Analysis Senior Project",
    "section": "1.2 Example data set in R",
    "text": "1.2 Example data set in R\nTo demonstrate survival analysis, an example data set was created including ten observations with the following columns: a. \\(id\\) variable for each observation, a \\(time\\) variable ranging from 1 to 10, and a \\(status\\) variable that was either a 1, which represented the event occurrence, or a 0, representing no event occurrence. For those assigned a 1, a survival time was assigned in the range of 1 to 9, representing the time that individual survived until the event occurred for them. For those assigned a 0, a time of t = 10 was assigned, suggesting that they lasted until the end of the hypothetical study without the event occurring. Table 1.1 shows these data. To perform survival analysis on these data, the probability of survival at each time from t = 0 to t = 10 can be calculated by dividing the amount of people surviving until that time by the total amount of people in the study. For the first observation in the example data, probability of survival is equal to 1, or 100%, because every participant would presumably begin the study alive. To calculate the probability of survival for time t = 1, the number of participants that did not experience the outcome of interest by t = 1 would be divided by 10, the total number of observations in the study. In this case, 9 participants survived until time t = 1, because only one observation was assigned a 1 between times t = 0 and t = 1. Dividing this total by the 10 total observations in the study shows that the probability of surviving to time 1 is 0.9, or 90%. As time increases, the total probability of survival for the group will decrease in the range of 1 to 0 because more people will be experiencing the outcome. This is why survival curves have a rightly skewed distribution. Table 1.2 shows the survival probabilities for each observation.\n\n# Load Packages\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(knitr)\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(ggsurvfit)\nlibrary(gt)\n\n\n# Create a simple data set\nid &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ntime &lt;- c(1, 2, 4, 5, 6, 8, 9, 10, 10, 10)\nstatus &lt;- c(1, 1, 1, 1, 1, 1, 1, 0, 0, 0)\nsurv &lt;- data.frame(id, time, status)\n\n\nsurv %&gt;% gt(caption = \"Example Data Set with ID, Status, and Time\") %&gt;%\n  cols_label(id = \"ID\", time = \"Time\", status = \"Status\") %&gt;%\n  tab_source_note(source_note = \"Table 1\") \n\n\n\n\n\n\n  Table 1.1:  surv table 1 \n  \n    \n    \n      ID\n      Time\n      Status\n    \n  \n  \n    1\n1\n1\n    2\n2\n1\n    3\n4\n1\n    4\n5\n1\n    5\n6\n1\n    6\n8\n1\n    7\n9\n1\n    8\n10\n0\n    9\n10\n0\n    10\n10\n0\n  \n  \n    \n      Table 1\n    \n  \n  \n\n\n\n\n\n\n# Calculate survival probabilities\nprobabilities &lt;- data.frame(\n  Number_alive = c(10, 9, 8, 8, 7, 6, 5, 4, 3, 3, 3),\n  Time = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10),\n  Probability = c(1, 0.9, 0.8, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.3, 0.3))\n\n\nprobabilities %&gt;% gt(caption = \"Probability of Survival Based on Time\") %&gt;%\n  cols_label(Number_alive = \"Number alive\", Time = \"Time\", Probability = \"Probability\") %&gt;%\n  tab_source_note(source_note = \"Table 2\") \n\n\n\n\n\n\n  Table 1.2:  probabilities \n  \n    \n    \n      Number alive\n      Time\n      Probability\n    \n  \n  \n    10\n0\n1.0\n    9\n1\n0.9\n    8\n2\n0.8\n    8\n3\n0.8\n    7\n4\n0.7\n    6\n5\n0.6\n    5\n6\n0.5\n    4\n7\n0.4\n    3\n8\n0.3\n    3\n9\n0.3\n    3\n10\n0.3\n  \n  \n    \n      Table 2"
  },
  {
    "objectID": "Kaplan_Meier.html#kaplan-meier-curve-and-descriptive-statistics",
    "href": "Kaplan_Meier.html#kaplan-meier-curve-and-descriptive-statistics",
    "title": "2  Kaplan Meier",
    "section": "2.2 Kaplan Meier Curve and Descriptive Statistics",
    "text": "2.2 Kaplan Meier Curve and Descriptive Statistics\nThe Kaplan Meier curve is a graphical representation of survival analysis. Similar to the survival probabilities discussed previously, the Kaplan Meier curve shows the relationships between time, which is typically plotted on the x-axis, and probability of survival, which is typically on the y-axis. The curve always ranges from 0 to 1 and is right skewed. Useful summary statistics for a Kaplan Meier Survival curve include confidence intervals and the median. A 95% confidence interval for each point can be found by using the formula \\(S_t ± 1.96 * SE(S_t)\\). The median value is typically reported rather than the mean because mean survival time cannot be reported reliably for those who have not experienced the outcome of interest yet. The median can be found by finding the time when probability of survival is equal to 0.5. Thus, the median can only be reported when at least half of the participants experienced the outcome of interest during the study (Sowmya R. Rao, PhD; David A. Schoenfeld, PhD)."
  },
  {
    "objectID": "KaplanMeier.html#kaplan-meier-survival-estimate",
    "href": "KaplanMeier.html#kaplan-meier-survival-estimate",
    "title": "2  Kaplan Meier",
    "section": "2.1 Kaplan Meier Survival Estimate",
    "text": "2.1 Kaplan Meier Survival Estimate\nThe Kaplan Meier survival estimate is how survival probabilities can be calculated while factoring in censored times. The Kaplan Meier survival estimate is used to calculate probability of survival at a given time where \\(S(t_j)\\) is the probability of being alive at time \\(t_j\\), \\(S(t_{j-1})\\) is the probability of being alive at \\(t_{j-1}\\), \\(n_j\\) is the number of patients alive just before \\(t_j\\), \\(d_j\\) is the number of events at \\(t_j\\), and \\(j\\) is the time interval of interest. The equation is \\(S(t_j)=S(t\\_{j-1})(1-\\frac{d_j}{n_j})\\) (Clark (2003)). The equation essentially divides the surviving individuals by the individuals at risk, similar to the previous calculations shown. However, Kaplan Meier curves adjust for right-censored times by dropping observations from the total number of individuals at risk, \\(n_j\\), after their censored time has been reached. This adjustment prevents overestimating the survival probability because it no longer assumes censored individuals are still alive or and at risk (Goel (2010))."
  },
  {
    "objectID": "KaplanMeier.html#kaplan-meier-curve-and-descriptive-statistics",
    "href": "KaplanMeier.html#kaplan-meier-curve-and-descriptive-statistics",
    "title": "2  Kaplan Meier",
    "section": "2.2 Kaplan Meier Curve and Descriptive Statistics",
    "text": "2.2 Kaplan Meier Curve and Descriptive Statistics\nThe Kaplan Meier curve is a graphical representation of survival analysis. Similar to the survival probabilities discussed previously, the Kaplan Meier curve shows the relationships between time, which is typically plotted on the x-axis, and probability of survival, which is typically on the y-axis. The curve always ranges from 0 to 1 and is right skewed. Useful summary statistics for a Kaplan Meier Survival curve include confidence intervals and the median. A 95% confidence interval for each point can be found by using the formula \\(S_t ± 1.96 * SE(S_t)\\). The median value is typically reported rather than the mean because mean survival time cannot be reported reliably for those who have not experienced the outcome of interest yet. The median can be found by finding the time when probability of survival is equal to 0.5. Thus, the median can only be reported when at least half of the participants experienced the outcome of interest during the study (Rao (2023))."
  },
  {
    "objectID": "KaplanMeier.html#kaplan-meier-in-r",
    "href": "KaplanMeier.html#kaplan-meier-in-r",
    "title": "2  Kaplan Meier",
    "section": "2.3 Kaplan Meier in R",
    "text": "2.3 Kaplan Meier in R\nLuckily, modern software makes these calculations easy and fast, as well as plotting them with confidence intervals and risk tables. The survival package in R has a function called Surv() that takes input data and creates a response object recording survival time for each observation. The survfit() function can be used to calculate the Kaplan Meier survival estimate for each time that a new event occurs. This object can then be used for the response in the regression functionSurvfit2() in the ggsurvfit package, which plots the Kaplan Meier curve for the data. The function takes into account right censoring as well, marking censored times with a \\(+\\) symbol in the object created and then editing the regression accordingly (Zabor (2023)). A new data set with censored times will be created to demonstrate this process. To do this, a 0 will be recorded for some individuals at times before t = 10. Table 2.1 shows this data set’s structure, and Figure 2.1 shows the Kaplan Meier curve for predicting the event.\n\n# Load Packages\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(knitr)\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(ggsurvfit)\nlibrary(gt)\n\n\n# Create data set\nid &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ntime &lt;- c(1, 2, 10, 4, 5, 6, 10, 8, 9, 10)\nstatus &lt;- c(1, 1, 0, 0, 1, 0, 0, 1, 1, 0)\ncensor &lt;- data.frame(id, time, status)\n\n\ncensor %&gt;% gt(caption = \"Example Data Set with Censored Times\") %&gt;%\n  cols_label(id = \"ID\", time = \"Time\", status = \"Status\") %&gt;%\n  tab_source_note(source_note = \"Table 3\") \n\n\n\n\n\n\n  Table 2.1:  Example Data Set with Censored Times \n  \n    \n    \n      ID\n      Time\n      Status\n    \n  \n  \n    1\n1\n1\n    2\n2\n1\n    3\n10\n0\n    4\n4\n0\n    5\n5\n1\n    6\n6\n0\n    7\n10\n0\n    8\n8\n1\n    9\n9\n1\n    10\n10\n0\n  \n  \n    \n      Table 3\n    \n  \n  \n\n\n\n\n\n\n# Surv() Function shows the time of event or censored time for each observation\ntimes2 &lt;- Surv(censor$time, censor$status)\ntimes2\n\n [1]  1   2  10+  4+  5   6+ 10+  8   9  10+\n\n\n\n# Calculate survival object\ns2 &lt;- survfit(times2 ~ 1, data = censor)\n# See the structure of this object\nstr(s2)\n\nList of 16\n $ n        : int 10\n $ time     : num [1:8] 1 2 4 5 6 8 9 10\n $ n.risk   : num [1:8] 10 9 8 7 6 5 4 3\n $ n.event  : num [1:8] 1 1 0 1 0 1 1 0\n $ n.censor : num [1:8] 0 0 1 0 1 0 0 3\n $ surv     : num [1:8] 0.9 0.8 0.8 0.686 0.686 ...\n $ std.err  : num [1:8] 0.105 0.158 0.158 0.221 0.221 ...\n $ cumhaz   : num [1:8] 0.1 0.211 0.211 0.354 0.354 ...\n $ std.chaz : num [1:8] 0.1 0.149 0.149 0.207 0.207 ...\n $ type     : chr \"right\"\n $ logse    : logi TRUE\n $ conf.int : num 0.95\n $ conf.type: chr \"log\"\n $ lower    : num [1:8] 0.732 0.587 0.587 0.445 0.445 ...\n $ upper    : num [1:8] 1 1 1 1 1 ...\n $ call     : language survfit(formula = times2 ~ 1, data = censor)\n - attr(*, \"class\")= chr \"survfit\"\n\n\n\n# View the survival estimate for each time an event occurs\ns2$time\n\n[1]  1  2  4  5  6  8  9 10\n\nround(s2$surv, 2)\n\n[1] 0.90 0.80 0.80 0.69 0.69 0.55 0.41 0.41\n\n\n\nsurvfit2(Surv(time, status) ~ 1, data = censor) %&gt;% \n  ggsurvfit() +\n  labs(\n    x = \"Time\",\n    y = \"Overall survival probability\",\n    title = \"Kaplan Meier Survival Curve\"\n  ) + \n  scale_x_continuous(breaks=seq(0,10,by=2)) + \n  scale_y_continuous(breaks=seq(0,1,by=.2)) +\n  add_risktable()\n\n\n\n\nFigure 2.1: ?(caption)"
  },
  {
    "objectID": "KaplanMeier.html#log-rank-test",
    "href": "KaplanMeier.html#log-rank-test",
    "title": "2  Kaplan Meier",
    "section": "2.4 Log-Rank Test",
    "text": "2.4 Log-Rank Test\nOne of the most common applications of survival analysis and Kaplan Meier curves is for comparing survival statistics between two groups. One example of this might be if a study is comparing survival after two different treatment plans. The Log-Rank Test is a statistical test that tests the null hypothesis that there is no difference between the survival estimates of two groups at any point in time (Rich (2010)). The only adjustment needed in R to factor in groups is to use the grouping variable as a predictor in the model (Zabor (2023)). The two survival curves are depicted in Figure 2.2.\n\n# Create a data set to compare to surv2\nid &lt;- c(1:20)\ntime &lt;- c(8, 7, 10, 8, 5, 10, 10, 8, 9, 10, 1, 2, 1, 4, 5, 3, 4, 10, 8, 1)\nstatus &lt;- c(0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1)\ngroup &lt;- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2 ,2 ,2, 2, 2)\nsurv3 &lt;- data.frame(id, time, status)\n\nThe survdiff function works similarly to the survfit function, but compares groups. The two curves are statistically different at the five percent level.\n\nsurvdiff(Surv(time, status) ~ group, data = surv3)\n\nCall:\nsurvdiff(formula = Surv(time, status) ~ group, data = surv3)\n\n         N Observed Expected (O-E)^2/E (O-E)^2/V\ngroup=1 10        4     6.91      1.23      4.81\ngroup=2 10        6     3.09      2.75      4.81\n\n Chisq= 4.8  on 1 degrees of freedom, p= 0.03 \n\n\n\nsurvfit2(Surv(time, status) ~ group, data = surv3) %&gt;% \n  ggsurvfit() +\n  labs(\n    x = \"Days\",\n    y = \"Overall survival probability\",\n    title = \"Kaplan Meier Survival Curve by Group\"\n  ) + \n  scale_x_continuous(breaks=seq(0,10,by=2)) + \n  scale_y_continuous(breaks=seq(0,1,by=.2)) +\n  add_risktable()\n\n\n\n\nFigure 2.2: ?(caption)"
  },
  {
    "objectID": "KaplanMeier.html#case-study",
    "href": "KaplanMeier.html#case-study",
    "title": "2  Kaplan Meier",
    "section": "2.5 Case Study",
    "text": "2.5 Case Study\nThe next example uses a data set with variables for predicting cirrhosis, or the permanent scarring of the liver, in patients with liver diseases such as hepatitis C. The data set is from a clinical trial conducted by the Mayo Clinic from 1974 to 1984. The data set contains 424 primary biliary cirrhosis patients with 20 variables (Fedesoriano (2021)). To conduct survival analysis, the Status variable was transformed to an indicator variable, labelled event, coded as a 1 representing death and 0 representing censored. The N_Days variable was used for the time variable, indicating number of days since the beginning of the trial. Figure 2.3 shows the Kaplan Meier for this case study.\n\ncirrhosis &lt;- read_csv(\"data/cirrhosis.csv\")\n\nRows: 418 Columns: 20\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (7): Status, Drug, Sex, Ascites, Hepatomegaly, Spiders, Edema\ndbl (13): ID, N_Days, Age, Bilirubin, Cholesterol, Albumin, Copper, Alk_Phos...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\ncirrhosis &lt;- cirrhosis %&gt;% mutate(event = if_else(Status == 'D', 1, 0)) \n\n\n# View times of censor or death\ntimes &lt;- Surv(cirrhosis$N_Days, cirrhosis$event)\ntimes\n\n  [1]  400  4500+ 1012  1925  1504+ 2503  1832+ 2466  2400    51  3762   304 \n [13] 3577+ 1217  3584  3672+  769   131  4232+ 1356  3445+  673   264  4079 \n [25] 4127+ 1444    77   549  4509+  321  3839  4523+ 3170  3933+ 2847  3611+\n [37]  223  3244  2297  4467+ 1350  4453+ 4556+ 3428  4025+ 2256  2576+ 4427+\n [49]  708  2598  3853  2386  1000  1434  1360  1847  3282  4459+ 2224  4365+\n [61] 4256+ 3090   859  1487  3992+ 4191  2769  4039+ 1170  3458+ 4196+ 4184+\n [73] 4190+ 1827  1191    71   326  1690  3707+  890  2540  3574  4050+ 4032+\n [85] 3358  1657   198  2452+ 1741  2689   460   388  3913+  750   130  3850+\n [97]  611  3823+ 3820+  552  3581+ 3099+  110  3086  3092+ 3222  3388+ 2583 \n[109] 2504+ 2105  2350+ 3445   980  3395  3422+ 3336+ 1083  2288   515  2033+\n[121]  191  3297+  971  3069+ 2468+  824  3255+ 1037  3239+ 1413   850  2944+\n[133] 2796  3149+ 3150+ 3098+ 2990+ 1297  2106+ 3059+ 3050+ 2419   786   943 \n[145] 2976+ 2615+ 2995+ 1427   762  2891+ 2870+ 1152  2863+  140  2666+  853 \n[157] 2835+ 2475+ 1536  2772+ 2797+  186  2055   264  1077  2721+ 1682  2713+\n[169] 1212  2692+ 2574+ 2301+ 2657+ 2644+ 2624+ 1492  2609+ 2580+ 2573+ 2563+\n[181] 2556+ 2555+ 2241+  974  2527+ 1576   733  2332+ 2456+ 2504+  216  2443+\n[193]  797  2449+ 2330+ 2363+ 2365+ 2357+ 1592+ 2318+ 2294+ 2272+ 2221+ 2090 \n[205] 2081  2255+ 2171+  904  2216+ 2224+ 2195+ 2176+ 2178+ 1786  1080  2168+\n[217]  790  2170+ 2157+ 1235  2050+  597   334  1945+ 2022+ 1978+  999  1967+\n[229]  348  1979+ 1165  1951+ 1932+ 1776+ 1882+ 1908+ 1882+ 1874+  694  1831+\n[241]  837+ 1810+  930  1690  1790+ 1435+  732+ 1785+ 1783+ 1769+ 1457+ 1770+\n[253] 1765+  737+ 1735+ 1701+ 1614+ 1702+ 1615+ 1656+ 1677+ 1666+ 1301+ 1542+\n[265] 1084+ 1614+  179  1191  1363+ 1568+ 1569+ 1525+ 1558+ 1447+ 1349+ 1481+\n[277] 1434+ 1420+ 1433+ 1412+   41  1455+ 1030+ 1418+ 1401+ 1408+ 1234+ 1067+\n[289]  799  1363+  901+ 1329+ 1320+ 1302+  877+ 1321+  533+ 1300+ 1293+  207 \n[301] 1295+ 1271+ 1250+ 1230+ 1216+ 1216+ 1149+ 1153+  994+  939+  839+  788+\n[313] 4062+ 3561  2844+ 2071  3030+ 1680+   41  2403+ 1170+ 2011  3523+ 3468+\n[325] 4795+ 1236+ 4214+ 2111  1462  1746    94   785  1518   466  3527+ 2635+\n[337] 2286   791  3492+ 3495+  111  3231+  625  3157+ 3021+  559  2812  2834+\n[349] 2855+  662   727  2716+ 2698+  990  2338+ 1616  2563+ 2537+ 2534+  778 \n[361]  617+ 2267+ 2249+  359  1925+  249  2202+   43  1197  1095   489  2149+\n[373] 2103+ 1980+ 1347+ 1478  1987+ 1168   597  1725+ 1899+  221  1022+ 1639+\n[385] 1635+ 1654+ 1653+ 1560+ 1581+ 1419+ 1443+ 1368+  193  1367+ 1329+ 1343+\n[397] 1328+ 1375+ 1260+ 1223+  935   943+ 1141+ 1092+ 1150+  703  1129+ 1086+\n[409] 1067+ 1072+ 1119+ 1097+  989+  681  1103+ 1055+  691+  976+\n\n\n\n# Calculate survival object\ns1 &lt;- survfit(times ~ 1, data = cirrhosis)\n# See the structure of this object\nstr(s1)\n\nList of 16\n $ n        : int 418\n $ time     : num [1:399] 41 43 51 71 77 94 110 111 130 131 ...\n $ n.risk   : num [1:399] 418 416 415 414 413 412 411 410 409 408 ...\n $ n.event  : num [1:399] 2 1 1 1 1 1 1 1 1 1 ...\n $ n.censor : num [1:399] 0 0 0 0 0 0 0 0 0 0 ...\n $ surv     : num [1:399] 0.995 0.993 0.99 0.988 0.986 ...\n $ std.err  : num [1:399] 0.00339 0.00416 0.00481 0.00538 0.0059 ...\n $ cumhaz   : num [1:399] 0.00478 0.00719 0.0096 0.01201 0.01443 ...\n $ std.chaz : num [1:399] 0.00338 0.00415 0.0048 0.00537 0.00589 ...\n $ type     : chr \"right\"\n $ logse    : logi TRUE\n $ conf.int : num 0.95\n $ conf.type: chr \"log\"\n $ lower    : num [1:399] 0.989 0.985 0.981 0.978 0.974 ...\n $ upper    : num [1:399] 1 1 1 0.999 0.997 ...\n $ call     : language survfit(formula = times ~ 1, data = cirrhosis)\n - attr(*, \"class\")= chr \"survfit\"\n\n\n\n# View the survival estimate for each time an event occurs\nround(s1$surv, 2)\n\n  [1] 1.00 0.99 0.99 0.99 0.99 0.98 0.98 0.98 0.98 0.97 0.97 0.97 0.97 0.96 0.96\n [16] 0.96 0.96 0.95 0.95 0.95 0.95 0.94 0.94 0.94 0.94 0.93 0.93 0.93 0.93 0.92\n [31] 0.92 0.92 0.92 0.91 0.91 0.91 0.91 0.91 0.90 0.90 0.90 0.90 0.89 0.89 0.89\n [46] 0.89 0.89 0.89 0.88 0.88 0.88 0.88 0.88 0.88 0.87 0.87 0.87 0.87 0.86 0.86\n [61] 0.86 0.86 0.86 0.85 0.85 0.85 0.85 0.85 0.85 0.84 0.84 0.84 0.84 0.84 0.84\n [76] 0.83 0.83 0.83 0.83 0.83 0.83 0.82 0.82 0.82 0.82 0.82 0.82 0.81 0.81 0.81\n [91] 0.81 0.81 0.81 0.81 0.81 0.81 0.80 0.80 0.80 0.80 0.80 0.80 0.80 0.80 0.80\n[106] 0.80 0.80 0.80 0.80 0.80 0.80 0.79 0.79 0.79 0.78 0.78 0.78 0.78 0.78 0.78\n[121] 0.78 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77 0.77\n[136] 0.77 0.77 0.77 0.77 0.77 0.77 0.76 0.76 0.76 0.76 0.76 0.76 0.76 0.76 0.76\n[151] 0.76 0.76 0.76 0.76 0.76 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75\n[166] 0.74 0.74 0.74 0.74 0.74 0.73 0.73 0.73 0.73 0.73 0.73 0.73 0.73 0.73 0.73\n[181] 0.73 0.73 0.73 0.73 0.73 0.73 0.73 0.72 0.72 0.72 0.72 0.72 0.71 0.71 0.71\n[196] 0.71 0.71 0.71 0.71 0.71 0.71 0.71 0.71 0.71 0.71 0.70 0.70 0.70 0.70 0.70\n[211] 0.70 0.70 0.70 0.70 0.70 0.70 0.69 0.69 0.69 0.69 0.69 0.69 0.69 0.69 0.69\n[226] 0.69 0.69 0.69 0.69 0.68 0.68 0.68 0.67 0.67 0.67 0.67 0.66 0.66 0.66 0.66\n[241] 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66\n[256] 0.65 0.65 0.65 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.63\n[271] 0.63 0.63 0.63 0.63 0.63 0.63 0.62 0.62 0.62 0.62 0.62 0.62 0.62 0.62 0.61\n[286] 0.61 0.61 0.61 0.61 0.61 0.61 0.61 0.61 0.60 0.60 0.60 0.60 0.60 0.60 0.60\n[301] 0.60 0.60 0.60 0.60 0.60 0.60 0.60 0.59 0.59 0.58 0.58 0.58 0.58 0.58 0.58\n[316] 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.57 0.56\n[331] 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.54 0.54 0.54 0.54 0.53 0.53 0.52 0.52\n[346] 0.52 0.51 0.51 0.50 0.50 0.49 0.48 0.48 0.48 0.48 0.48 0.48 0.48 0.47 0.45\n[361] 0.45 0.45 0.44 0.44 0.44 0.44 0.43 0.43 0.43 0.41 0.41 0.40 0.40 0.40 0.40\n[376] 0.40 0.40 0.40 0.40 0.40 0.38 0.38 0.38 0.38 0.35 0.35 0.35 0.35 0.35 0.35\n[391] 0.35 0.35 0.35 0.35 0.35 0.35 0.35 0.35 0.35\n\n\n\nsurvfit2(Surv(N_Days, event) ~ 1, data = cirrhosis) %&gt;% \n  ggsurvfit() +\n  labs(\n    x = \"Time\",\n    y = \"Overall survival probability\",\n    title = \"Kaplan Meier Survival Curve\"\n  ) + \n  add_risktable()\n\n\n\n\nFigure 2.3: ?(caption)"
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "Survival Analysis Senior Project",
    "section": "1.4 References",
    "text": "1.4 References\n\n\n\n\nCollet, David. 2003. Modelling Survival Data in Medical Research. Chapman & Hall/CRC."
  },
  {
    "objectID": "KaplanMeier.html#references",
    "href": "KaplanMeier.html#references",
    "title": "2  Kaplan Meier",
    "section": "2.6 References",
    "text": "2.6 References\n\n\n\n\nClark, Bradburn, T. G. 2003. “Survival Analysis Part i: Basic Concepts and First Analyses.” British Journal of Cancer, May. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2394262/.\n\n\nFedesoriano. 2021. “Cirrhosis Prediction Dataset.” www.kaggle.com/datasets/fedesoriano/cirrhosis-prediction-dataset/data.\n\n\nGoel, Khanna, M. K. 2010. “Understanding Survival Analysis: Kaplan-Meier Estimate.” International Journal of Ayurveda Research. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3059453.\n\n\nRao, & Schoenfeld, S. R. 2023. “Statistical Primer for Cardiovascular Research.” AHA Journals. https://www.ahajournals.org/doi/pdf/10.1161/circulationaha.106.614859.\n\n\nRich, Neely, J. T. 2010. “A Practical Guide to Understanding Kaplan-Meier Curves.” Otolaryngology–Head and Neck Surgery: Official Journal of American Academy of Otolaryngology-Head and Neck Surgery. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3932959/.\n\n\nZabor, E. C. 2023. “Survival Analysis in r.” https://www.emilyzabor.com/tutorials/survival_analysis_in_r_tutorial.html."
  }
]